
<!DOCTYPE html><html lang="zh_cn">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.28.0" theme-name="Stellar" theme-version="1.28.0">
  
  <meta name="generator" content="Hexo 8.1.1">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f9fafb">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  
  <title>springcloud初步探索 - Timous</title>

  
    <meta name="description" content="Spring Cloud Netflix回顾之前的知识~ 串一下自己会的东西，这个阶段该如何学~ 这个阶段该如何学~ 优点 单一职责原则 每个服务足够内聚，足够小，代码容易理解，这样能聚焦一个指定的业务功能或业务需求 开发简单，开发效率提高，一个服务可能就是单一的干一件事 微服务能够被小团队单独开发，这个小团队是2~5人的开发人员组成 微服务松耦合的，是有功能意义的服务，无论是在开发阶段或者是部署">
<meta property="og:type" content="article">
<meta property="og:title" content="springcloud初步探索">
<meta property="og:url" content="http://example.com/2022/01/05/springcloud%E5%88%9D%E6%AD%A5%E6%8E%A2%E7%B4%A2/index.html">
<meta property="og:site_name" content="Timous">
<meta property="og:description" content="Spring Cloud Netflix回顾之前的知识~ 串一下自己会的东西，这个阶段该如何学~ 这个阶段该如何学~ 优点 单一职责原则 每个服务足够内聚，足够小，代码容易理解，这样能聚焦一个指定的业务功能或业务需求 开发简单，开发效率提高，一个服务可能就是单一的干一件事 微服务能够被小团队单独开发，这个小团队是2~5人的开发人员组成 微服务松耦合的，是有功能意义的服务，无论是在开发阶段或者是部署">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049376.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049468.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049073.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049456.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049742.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049807.png">
<meta property="og:image" content="http://example.com/springcloud%E5%88%9D%E6%AD%A5%E6%8E%A2%E7%B4%A2.assets/image-20200921165536231.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049163.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049284.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049800.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049135.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049366.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050296.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050032.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050464.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050779.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050988.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050479.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112054880.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050440.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050593.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050578.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050777.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050146.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112052125.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112052361.png">
<meta property="og:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112052917.png">
<meta property="article:published_time" content="2022-01-05T05:20:40.000Z">
<meta property="article:modified_time" content="2026-01-11T12:54:21.082Z">
<meta property="article:author" content="timous">
<meta property="article:tag" content="微服务">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049376.png">
  
  
  
  <meta name="keywords" content="微服务">

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.28.0">

  

  

  
</head>
<body>

<div class="l_body s:aa content tech" id="start" layout="post" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601111717625.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">Timous</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="Search"></form><div id="search-result"></div><div class="search-no-result">No Results!</div></div>


<nav class="menu dis-select"></nav>
</div>
<div class="widgets">


<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">Recent Update</span></div><div class="widget-body fs14"><a class="item title" href="/2021/04/23/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E5%AF%B9%E6%8E%A5/"><span class="title">支付宝支付对接课程</span></a><a class="item title" href="/2021/04/15/%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/"><span class="title">阻塞队列</span></a><a class="item title" href="/2021/04/23/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E5%AF%B9%E6%8E%A5%E8%AF%BE%E7%A8%8B/"><span class="title">支付宝支付对接</span></a><a class="item title" href="/2021/03/27/%E6%97%8B%E8%BD%AC%E9%93%BE%E8%A1%A8/"><span class="title">旋转链表</span></a><a class="item title" href="/2021/04/14/%E7%BA%BF%E7%A8%8B%E4%B9%8BCallable%E6%8E%A5%E5%8F%A3/"><span class="title">线程之Callable接口</span></a><a class="item title" href="/2022/01/09/%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0/"><span class="title">线程学习</span></a><a class="item title" href="/2021/04/16/%E7%BA%BF%E7%A8%8B%E6%B1%A0/"><span class="title">线程池</span></a><a class="item title" href="/2022/02/27/%E5%BE%AE%E4%BF%A1%E5%95%86%E5%9F%8E%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%95%86%E5%93%81%E7%B1%BB%E5%88%AB%E6%98%BE%E7%A4%BA/"><span class="title">微信商城小程序商品类别显示</span></a><a class="item title" href="/2022/02/25/%E5%BE%AE%E4%BF%A1%E5%95%86%E5%9F%8E%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/"><span class="title">微信商城小程序开发</span></a><a class="item title" href="/2022/02/28/%E5%BE%AE%E4%BF%A1%E5%95%86%E5%9F%8E%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%A4%A7%E7%B1%BB%E6%98%BE%E7%A4%BA/"><span class="title">微信商城小程序大类显示</span></a></div></widget>
</div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a></div>
<div class="flex-row" id="post-meta"><span class="text created">Posted on: <time datetime="2022-01-05T05:20:40.000Z">2022-01-05</time></span><span class="sep updated"></span><span class="text updated">Updated on: <time datetime="2026-01-11T12:54:21.082Z">2026-01-11</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>springcloud初步探索</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><h1 id="Spring-Cloud-Netflix"><a href="#Spring-Cloud-Netflix" class="headerlink" title="Spring Cloud Netflix"></a>Spring Cloud Netflix</h1><p>回顾之前的知识~</p>
<p>串一下自己会的东西，这个阶段该如何学~</p>
<p>这个阶段该如何学~</p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li>单一职责原则</li>
<li>每个服务足够内聚，足够小，代码容易理解，这样能聚焦一个指定的业务功能或业务需求</li>
<li>开发简单，开发效率提高，一个服务可能就是单一的干一件事</li>
<li>微服务能够被小团队单独开发，这个小团队是2~5人的开发人员组成</li>
<li>微服务松耦合的，是有功能意义的服务，无论是在开发阶段或者是部署阶段都是独立的</li>
<li>微服务能使用不同的语言开发</li>
<li>易于和 第三方集成，微服务允许容易且灵活的方式集成自动部署，通过持续工具，如jenkins，Hadson，bamboo</li>
<li>微服务易于被一个开发人员理解，修改和维护，这样小团队能够更关注自己的工作成果。无需通过合作才能体现价值</li>
<li>微服务允许你利用融合最新技术</li>
<li>微服务知识业务逻辑的代码，不会和html，css或者是其他界面混合</li>
<li>每个服务都有自己的存储能力，可以有自己的数据库，也可以有统一的数据库</li>
</ul>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>开发人员要处理分布式系统的复杂性</li>
<li>多服务运维难度，随着服务的增加，运维的压力也在增大</li>
<li>系统部署依赖</li>
<li>服务间的通信成本</li>
<li>数据的一致性</li>
<li>系统集成测试</li>
<li>性能监控..</li>
</ul>
<h2 id="微服务的技术栈有哪些"><a href="#微服务的技术栈有哪些" class="headerlink" title="微服务的技术栈有哪些"></a>微服务的技术栈有哪些</h2><table>
<thead>
<tr>
<th>微服务条目</th>
<th>落地技术</th>
</tr>
</thead>
<tbody><tr>
<td>服务开发</td>
<td>SpringBoot，Spring，SpringMVC</td>
</tr>
<tr>
<td>服务配置与管理</td>
<td>Netflix公司的Archaius、阿里的Diamond等</td>
</tr>
<tr>
<td>服务注册与发现</td>
<td>Eureka、Consul、Zookeeper等</td>
</tr>
<tr>
<td>服务调用</td>
<td>Rest、RPC、gRPC</td>
</tr>
<tr>
<td>服务熔断器</td>
<td>Hystrix、Envoy</td>
</tr>
<tr>
<td>负载均衡</td>
<td>Ribbon、Nginx等</td>
</tr>
<tr>
<td>服务接口调用（客户端调用服务的简化工具）</td>
<td>Feign等</td>
</tr>
<tr>
<td>消息队列</td>
<td>Kafka、RabbitMQ、ActiveMQ等</td>
</tr>
<tr>
<td>服务配置中心管理</td>
<td>SpringCloudConfig、Chef等</td>
</tr>
<tr>
<td>服务路由（API网关）</td>
<td>Zuul等</td>
</tr>
<tr>
<td>服务监控</td>
<td>Zabbix、Nagios、Metrics、Specatator等</td>
</tr>
<tr>
<td>全链路追踪</td>
<td>Zipkin、Brave、Dapper等</td>
</tr>
<tr>
<td>服务部署</td>
<td>Docker、OpenStack、Kuberneres等</td>
</tr>
<tr>
<td>数据流作开发包</td>
<td>SpringCloud Stream（封装Redis，Rabbit，Kafka等发送接收消息）</td>
</tr>
<tr>
<td>事件消息总线</td>
<td>SpringCloud Bus</td>
</tr>
</tbody></table>
<h2 id="为什么选择SpringCloud进行微服务架构"><a href="#为什么选择SpringCloud进行微服务架构" class="headerlink" title="为什么选择SpringCloud进行微服务架构"></a>为什么选择SpringCloud进行微服务架构</h2><h3 id="1-选型依据"><a href="#1-选型依据" class="headerlink" title="1.选型依据"></a>1.选型依据</h3><ul>
<li>整体解决方案和框架成熟度</li>
<li>社区热度</li>
<li>可维护性</li>
<li>学习曲线</li>
</ul>
<h3 id="2-当前各大IT公司用的微服务架构有哪些"><a href="#2-当前各大IT公司用的微服务架构有哪些" class="headerlink" title="2.当前各大IT公司用的微服务架构有哪些"></a>2.当前各大IT公司用的微服务架构有哪些</h3><ul>
<li>阿里： dubbo+HFS</li>
<li>京东： JSF</li>
<li>新浪： Motan</li>
<li>当当网： DubboX</li>
<li>….</li>
</ul>
<h3 id="3-各微服务框架对比"><a href="#3-各微服务框架对比" class="headerlink" title="3.各微服务框架对比"></a>3.各微服务框架对比</h3><table>
<thead>
<tr>
<th>功能点&#x2F;服务框架爱</th>
<th>Netflix&#x2F;springcloud</th>
<th>Motan</th>
<th>gRPC</th>
<th>Thrift</th>
<th>Dubbo&#x2F;DubboX</th>
</tr>
</thead>
<tbody><tr>
<td>功能定位</td>
<td>完整的微服务框架</td>
<td>RPC框架，但整合了ZK或Consul，实现集群环境的基本服务注册&#x2F;发现</td>
<td>RPC框架</td>
<td>RPC框架</td>
<td>服务框架</td>
</tr>
<tr>
<td>支持Rest</td>
<td>是，Ribbon支持多种课插拔的序列化选择</td>
<td>否</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td>支持RPC</td>
<td>否</td>
<td>是（Hession2）</td>
<td>是</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>支持多语言</td>
<td>是（Rest形式）？</td>
<td>否</td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>负载均衡</td>
<td>是（服务端zuul+客户端Ribbon），zuul-服务，动态路由，云端负载均衡Eureka（针对中间层服务器）</td>
<td>是（客户端）</td>
<td>是</td>
<td>是</td>
<td>是（客户端）</td>
</tr>
<tr>
<td>配置服务</td>
<td>Netflix Archaius，SpringCloud Config Server集中配置</td>
<td>是（zookeeper提供）</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td>服务调用链监控</td>
<td>是（zuul），zuul提供边缘服务API网关</td>
<td>否</td>
<td>否</td>
<td>否</td>
<td>否</td>
</tr>
<tr>
<td>高可用&#x2F;容错</td>
<td>是（服务端Hystrix+客户端Ribbon）</td>
<td>是（客户端）</td>
<td>否</td>
<td>否</td>
<td>是（客户端）</td>
</tr>
<tr>
<td>典型应用案例</td>
<td>Netflix</td>
<td>Sina</td>
<td>Google</td>
<td>FaceBook</td>
<td></td>
</tr>
<tr>
<td>社区活跃程度</td>
<td>高</td>
<td>一般</td>
<td>高</td>
<td>一般</td>
<td>2017年后重新开始维护，之前断更了五年</td>
</tr>
<tr>
<td>学习难度</td>
<td>中等</td>
<td>低</td>
<td>高</td>
<td>高</td>
<td>低</td>
</tr>
<tr>
<td>文档丰富程度</td>
<td>高</td>
<td>一般</td>
<td>一般</td>
<td>一般</td>
<td>高</td>
</tr>
<tr>
<td>其他</td>
<td>SpringCloud Bus为我们的应用程序带来了更多管理端点</td>
<td>支持降级</td>
<td>Netflix内部在开发集成gRPC</td>
<td>IDL定义</td>
<td>实践的公司比较多</td>
</tr>
</tbody></table>
<h2 id="SpringCloud入门概述"><a href="#SpringCloud入门概述" class="headerlink" title="SpringCloud入门概述"></a>SpringCloud入门概述</h2><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049376.png" alt="image-20200922153247024"></p>
<p>SpringCloud，基于Springboot提供的一套微服务解决方案，包括服务注册与发现，配置中心，全链路监控，服务网关，负载均衡，熔断器等组件，除了基于NetFlix的开源组件做高度抽象封装之外，还有一些选型中立的开源组件。</p>
<p>SpringCloud利用SpringBoot的开发便利性，巧妙的简化了分布式系统基础设施的开发，SpringCloud为李开发人员提供了快速构建分布式系统的一些工具，&#x3D;&#x3D;包括配置管理、服务发现、断路器、路由、微代理、事件总线、全局锁、决策竞选、分布式会话等等&#x3D;&#x3D;他们都可以用SpringBoot的开发风格做到一键启动和部署</p>
<p>SpringBoot并没有重复造轮子，它只是将目前各家公司开发的比较成熟，经得起实际考验的服务框架组合起来，通过SpringBoot风格进行在封装，屏蔽掉了复杂的配置和实现原理。&#x3D;&#x3D;最终给开发者留出了一套简单易懂，易部署和易维护的分布式系统开发工具包&#x3D;&#x3D;</p>
<p>SpringCloud是分布式微服务架构下的一站式解决方案，是各个微服务架构落地技术的集合体，俗称微服务全家桶</p>
<h3 id="SpringBoot和SpringCloud关系"><a href="#SpringBoot和SpringCloud关系" class="headerlink" title="SpringBoot和SpringCloud关系"></a>SpringBoot和SpringCloud关系</h3><ul>
<li>SpringBoot专注于快速方便的开发单个个体微服务</li>
<li>SpringCloud是关注全局的微服务协调治理框架，他将SpringBoot开发的一个个单体微服务整合并管理起来，为各个微服务之间提供： 配置管理，服务发现，断路器，，路由，微代理，实践总线，全局锁，决策竞选，分布式会话等等集成服务</li>
<li>SpringBoot可以离开SpringCloud独立使用开发项目，但是SpringCloud离不开SpringBoot，属于依赖关系</li>
<li>&#x3D;&#x3D;SpringBoot专注于凯苏、方便的开发单个个体微服务，SpringCloud关注全局的服务治理框架&#x3D;&#x3D;</li>
</ul>
<h3 id="Dubbo和SpringCloud技术选型"><a href="#Dubbo和SpringCloud技术选型" class="headerlink" title="Dubbo和SpringCloud技术选型"></a>Dubbo和SpringCloud技术选型</h3><h4 id="1-分布式-服务治理Dubbo"><a href="#1-分布式-服务治理Dubbo" class="headerlink" title="1.分布式+服务治理Dubbo"></a>1.分布式+服务治理Dubbo</h4><p>目前成熟的互联网架构： 应用服务化拆分+消息中间件</p>
<h4 id="2-Dubbo和SpringCloud对比"><a href="#2-Dubbo和SpringCloud对比" class="headerlink" title="2.Dubbo和SpringCloud对比"></a>2.Dubbo和SpringCloud对比</h4><p>传统的架构</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049468.png" alt="image-20200922160813472"></p>
<p>结果：</p>
<table>
<thead>
<tr>
<th></th>
<th>Dubbo</th>
<th>Spring</th>
</tr>
</thead>
<tbody><tr>
<td>服务注册中心</td>
<td>zookeeper</td>
<td>Spring Cloud Netflix Eureka</td>
</tr>
<tr>
<td>服务调用方式</td>
<td>RPC</td>
<td>REST API</td>
</tr>
<tr>
<td>服务监控</td>
<td>Dubbo-monitor</td>
<td>Spring Boot Admin</td>
</tr>
<tr>
<td>断路器</td>
<td>不完善</td>
<td>Spring Cloud Netflix Hystrix</td>
</tr>
<tr>
<td>服务网关</td>
<td>无</td>
<td>Spring Cloud Netflix zuul</td>
</tr>
<tr>
<td>分布式配置</td>
<td>无</td>
<td>Spring Cloud Config</td>
</tr>
<tr>
<td>服务跟踪</td>
<td>无</td>
<td>Spring Cloud Seluth</td>
</tr>
<tr>
<td>消息总线</td>
<td>无</td>
<td>Spring Cloud Bus</td>
</tr>
<tr>
<td>数据流</td>
<td>无</td>
<td>Spring Cloud Stream</td>
</tr>
<tr>
<td>批量任务</td>
<td>无</td>
<td>Spring Cloud Task</td>
</tr>
</tbody></table>
<p>&#x3D;&#x3D;最大区别： SpringCloud抛弃了Dubbo的RPC通信，采取的是HTTP的REST方式&#x3D;&#x3D;</p>
<p>严格来说，这两种方式各有优劣。虽然从一定程度来说，后者牺牲了服务调用的性能，但也避免了上面提到的原生RPC带来的问题。而且REST相比RPC更为灵活，服务提供方和调用方法的依赖只依靠一纸契约，不存在代码级别的强依赖，这在强调快速演化的微服务环境下，显得更加合适</p>
<p>&#x3D;&#x3D;品牌机与组装机的区别&#x3D;&#x3D;</p>
<p>很明显，SpringCloud的功能比DUBBO更加强大，涵盖面更广，而且作为Spring的拳头项目，他也能够与Spring Framework  SpringBoot Spring Data  Spring Batch 等其他Spring项目完美融合，这些对于微服务而言是至关重要的。使用Dubbo构建的微服务架构就像组装电脑，各环节我们的选择自由度很高，但是最终结果很有可能因为一条内存质量不行就点不亮了，总是让人不怎么放心，但是如果你是一名高手，那这些都不是问题；而Spring Cloud就像品牌机，在Spring Source 的整合下，做了大量的兼容性测试，保证机器拥有更高的稳定性，但是如果非要在使用非原装组件外的东西，就需要对其基础有足够的了解</p>
<p>&#x3D;&#x3D;社区支持与更新力度&#x3D;&#x3D;</p>
<p>最为重要的是，Dubbo停止了5年左右的更新，虽然2017.7重启了，对于技术发展的新需求，需要由开发者自行拓展升级（比如当当网弄出了DubboX），这对于很多想要采用微服务架构的中小软件组织，显然是不太合适的，中小公司没有这么强大的技术能力去修改Dubbo源码+周边的一整套解决方案，并不是每一个公司都有阿里这样的大牛</p>
<p>&#x3D;&#x3D;<strong>设计模式 + 微服务拆分  优秀的人吧不一定善于表达  可以指挥</strong>&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;总结&#x3D;&#x3D;</p>
<p>曾风靡全球的开源RPC服务框架Dubbo在重启维护后，令许多用户为之雀跃，但同时，也迎来了一些质疑的声音。互联网技术发展迅速，Dubbo是否还能跟上时代？Dubbo与Spring Cloud相比又有何优势和差异？是否会有相关举措保证Dubbo的后续更新频率</p>
<p>人物： Dubbo重启维护开发的刘军，主要负责人之一</p>
<p>阿里巴巴中间件高级研发工程师，主导了 Dubbo 重启维护以后的几个发版计划，专注于高性能 RPC 框架和微服务相关领域。曾负责网易考拉 RPC 框架的研发及指导在内部使用，参与了服务治理平台、分布式跟踪系统、分布式一致性框架等从无到有的设计与开发过程。</p>
<p>文档： <a target="_blank" rel="noopener" href="https://www.sohu.com/a/215931152_827544">https://www.sohu.com/a/215931152_827544</a></p>
<p><strong>解决的问题域不一样： Dubbo的定位是一款RPC框架，Spring Cloud的目标是微服务架构下的一站式解决方案</strong></p>
<h4 id="3-SpringCloud能干啥"><a href="#3-SpringCloud能干啥" class="headerlink" title="3.SpringCloud能干啥"></a>3.SpringCloud能干啥</h4><ul>
<li>Distributed&#x2F;versioned configuration</li>
<li>Service registration and discovery</li>
<li>Routing</li>
<li>Service-to-service calls</li>
<li>Load balancing</li>
<li>Circuit Breakers</li>
<li>Global locks</li>
<li>Leadership election and cluster state</li>
<li>Distributed messaging</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049073.png" alt="image-20200923143614276"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Spring Cloud 是一个由众多独立子项目组成的大型综合项目，每个子项目有不同的发行节奏，都维护这自己的发布版本号。Spring Cloud通过一个资源清单BOM（Bill of Materials） 来管理每个版本的子项目清单。为避免与子项目的发不号混淆，所以没有采取版本号的方式，而是通过命名的方式。</span><br><span class="line">   </span><br><span class="line">    </span><br><span class="line">这些版本名称的命名方式采用了伦敦地铁站的名称，同时根据字母表的顺序来对应版本时间顺序，比如最早的Release版本： Angle ， 第二个Release版本： Brixton 然后是Camden、Dalston、Edgware，目前最新的是Finchley版本。</span><br></pre></td></tr></table></figure>

<p>参考书：</p>
<p><a target="_blank" rel="noopener" href="https://www.springcloud.cc/spring-cloud-netflix.html">https://www.springcloud.cc/spring-cloud-netflix.html</a></p>
<p>中文API文档：（官方文档的翻译版）<a target="_blank" rel="noopener" href="https://www.springcloud.cc/spring-cloud-dalston.html">https://www.springcloud.cc/spring-cloud-dalston.html</a></p>
<p>中国社区：<a target="_blank" rel="noopener" href="http://www.springcloud.cn/">http://www.springcloud.cn/</a></p>
<p>中文网：<a target="_blank" rel="noopener" href="https://www.springcloud.cc/">https://www.springcloud.cc/</a></p>
<h4 id="4-SpringCloud版本选择"><a href="#4-SpringCloud版本选择" class="headerlink" title="4.SpringCloud版本选择"></a>4.SpringCloud版本选择</h4><table>
<thead>
<tr>
<th>Spring Boot</th>
<th>Spring Cloud</th>
<th>关系</th>
</tr>
</thead>
<tbody><tr>
<td>1.2.x</td>
<td>Angle版本（天使）</td>
<td>兼容SpringBoot 1.2.x</td>
</tr>
<tr>
<td>1.3.x</td>
<td>Brixton版本（布里克斯顿）</td>
<td>兼容SpringBoot 1.3.x，兼容SpringBoot 1.4.x</td>
</tr>
<tr>
<td>1.4.x</td>
<td>Camden版本（卡姆登）</td>
<td>兼容SpringBoot 1.4.x，兼容SpringBoot 1.5.x</td>
</tr>
<tr>
<td>1.5.x</td>
<td>Dalston版本（多尔斯顿）</td>
<td>兼容SpringBoot 1.5.x，不兼容SpringBoot 2.0.x</td>
</tr>
<tr>
<td>1.5.x</td>
<td>Edgware版本（埃奇韦尔）</td>
<td>兼容SpringBoot 1.5.x，不兼容SpringBoot 2.0.x</td>
</tr>
<tr>
<td>2.0.x</td>
<td>Finchley版本（芬奇利）</td>
<td>兼容SpringBoot 2.0.x，不兼容SpringBoot 1.5.x</td>
</tr>
<tr>
<td>2.1.x</td>
<td>Greenwich版本</td>
<td></td>
</tr>
</tbody></table>
<h4 id="实际开发的版本关系"><a href="#实际开发的版本关系" class="headerlink" title="实际开发的版本关系"></a>实际开发的版本关系</h4><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049456.png" alt="image-20200923150751935"></p>
<p>创建项目测试</p>
<h2 id="Eureka服务注册与发现"><a href="#Eureka服务注册与发现" class="headerlink" title="Eureka服务注册与发现"></a>Eureka服务注册与发现</h2><h3 id="1-什么是Eureka"><a href="#1-什么是Eureka" class="headerlink" title="1.什么是Eureka"></a>1.什么是Eureka</h3><ul>
<li>Eureka如何读</li>
<li>Netflix在设计Eureka在设计Eureka时，遵循的就是AP原则</li>
<li>Eureka是NetFlix的一个子模块，也是核心模块之一。Eureka是一个基于Rest的服务，用于定位服务，以实现云端中间层服务发现和故障转移，服务注册与发现对于微服务来说是非常重要，有了服务发现与注册，只需要使用服务的标识符，就可以访问到服务，而不需要修改服务调用的配置文件了，类似于Dubbo的注册中心，比如zookeeper；</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049742.png" alt="image-20200923212602562"></p>
<h3 id="2-原理讲解"><a href="#2-原理讲解" class="headerlink" title="2.原理讲解"></a>2.原理讲解</h3><ul>
<li><p>Eureka的基本架构</p>
<ul>
<li><p>SpringCloud封装了NetFlix公司开发的Eureka模块来实现注册和发现（对比zookeeper）</p>
</li>
<li><p>Eureka采用了C-S的架构设计，EurekaServer作为服务注册功能的服务器，他是服务注册中心</p>
</li>
<li><p>而系统中的其他微服务。使用Eureka的客户端连接到EurekaServer并维持心跳连接，这样系统的维护人员就可以通过EurekaServer来监控系统中各个微服务是否正常运行，SpringCloud的一些其他模块（比如Zuul）就可以通过EurekaServer来发现系统中的其他微服务，并执行相关的逻辑</p>
</li>
<li><p>和Dubbo架构对比</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049807.png" alt="image-20200923212830150"></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="/springcloud%E5%88%9D%E6%AD%A5%E6%8E%A2%E7%B4%A2.assets/image-20200921165536231.png" alt="image-20200921165536231"></p>
</li>
<li><p>Eureka 包含两个组件 Eureka Server he Eureka Client</p>
</li>
<li><p>Eureka 提供服务注册服务，各个节点启动之后，会在EurekaServer中进行注册，这样Eureka Server 中的服务注册表中将会存所有可用的服务节点的信息，服务节点的信息可以在界面中直观的看到</p>
</li>
<li><p>Eureka Client 是一个java客户端，用于简化Eureka Server的交互，客户端同时也具备一个内置的、使用轮询负载算法的负载均衡器。在应用启动之后，将会向Eureka Server 发送心跳（默认周期为30秒）。 如果Eureka Server在多个心跳周期内没有接收到某个节点的心跳，Eureka将会从服务注册表中把这个服务节点移除掉（默认周期为90 秒）</p>
</li>
</ul>
</li>
<li><p>三大角色</p>
<ul>
<li>Eureka Server ： 提供服务的注册与发现</li>
<li>Eureka Provider： 将自身的服务注册到Eureka中，从而是消费方能够找到</li>
<li>Service Consumer： 服务消费方从Eureka中获取注册服务列表，从而找到消费服务</li>
</ul>
</li>
<li><p>盘点目前工程的状况</p>
</li>
</ul>
<p>&#x3D;&#x3D;<strong>自我保护机制： 好死不如赖活着</strong>&#x3D;&#x3D;</p>
<p>一句话总结： 某时刻某个微服务不可以用了，eureka不会立刻清理，依旧会对该微服务的信息进行保存！！！</p>
<ul>
<li>默认情况下，如果EurekaServer在一定时间内没有接收到某个微服务的心跳，EurekaServer将会注销该实例（默认是90 秒）。但是当网络分区故障发生的时候，微服务与Eureka之间无法正常通行，以上行为可能变得非常危险了—-因为为服务本身是非常健康的，<strong>此时本不应该注销这个服务。<strong>Eureka通过</strong>自我保护机制</strong>来解决这个问题—-当EurekaServer节点在短时间内丢失过多客户端时（可能发生了网络分区故障），那么这个节点就会进入自我保护的模式。一旦进入该模式，EurekaServer就会保护服务注册表中的信息，不再删除服务注册表中的数据（也就是不会注销任何的微服务）。当网络故障恢复之后，该EurekaServer节点会自动退出自我保护模式。</li>
<li>在自我保护的模式中，EurekaServer会保护服务注册表中的信息，不再注销任何服务实例。当它收到的心跳数 重新恢复到阈值以上的时候，该Eureka节点会自动退出自我保护的模式。他的设计哲学就是宁可保留错误的服务注册信息，也不盲目注销可能健康的服务实例。一句话： 好死不如赖活着</li>
<li>综上，自我保护模式是一种应对网络异常的安全保护措施。它的架构哲学就是宁可保留所有微服务（健康的微服务和不健康的微服务都会保留），也不盲目注销任何健康的服务。使用自我保护模式，可以让Eureka集群更加健壮和稳定</li>
<li>在SpringCloud中，可以使用eureka，server，enable-self-preservation &#x3D; false禁用自我保护模式（不推荐关闭自我保护的机制）</li>
</ul>
<h3 id="5-8081服务发现Discovery"><a href="#5-8081服务发现Discovery" class="headerlink" title="5.8081服务发现Discovery"></a>5.8081服务发现Discovery</h3><ul>
<li>对于注册进Eureka的微服务，可以通过服务发现来获得该服务的信息【对外暴露服务】</li>
</ul>
<h3 id="Eureka和zookeeper的区别"><a href="#Eureka和zookeeper的区别" class="headerlink" title="Eureka和zookeeper的区别"></a>Eureka和zookeeper的区别</h3><p><strong>回顾CAP原则</strong></p>
<p>RDBMS（mysql orcle sqlserver）  &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;》 acid</p>
<p>NoSQL（redis mongdb） &#x3D;&#x3D;&#x3D;》CAP</p>
<p><strong>ACID是什么</strong></p>
<ul>
<li>A(Atomicity)  原子性</li>
<li>C(Consistency)  一致性</li>
<li>I(Isolation)  隔离性</li>
<li>D(Durability) 持久性</li>
</ul>
<p><strong>CAP是什么</strong></p>
<ul>
<li>C(Consisitency)  强一致性</li>
<li>A(Avavilability)  可用性</li>
<li>P(Partition tolereance)  分区容错性</li>
</ul>
<p>CAP的三进二： CA    AP  CP</p>
<p>&#x3D;&#x3D;<strong>CAP核心理论：</strong>&#x3D;&#x3D;</p>
<ul>
<li>一个分布式系统不可能很好的满足一致性</li>
<li>根据CAP定理，将NoSQL数据库粉尘了满足CA原则，满足CP原则和满足AP原则的三大类<ul>
<li>CA： 单点集群，满足一致性。可用性的系统，通常可扩展性较差</li>
<li>CP： 满足一致性，分区容错的系统，通常性能不是特别高</li>
<li>AP： 满足可用性，分区容错性的系统，通常可能对一致性要求低一些</li>
</ul>
</li>
</ul>
<p><strong>作为服务注册中心，Eureka比zookeeper好在哪里？</strong></p>
<p>著名的CAP理论指出，一个分布式系统不能同时满足CAP</p>
<p>由于分区容错性P在分布式系统中是必须要保证的，因此我们只能在A和C之间进行权衡</p>
<ul>
<li>zookeeper保证的是CP</li>
<li>Eureka保证的是AP</li>
</ul>
<p><strong>zookeeper保证的是CP</strong></p>
<p>当向注册中心查询服务的时候，我们可以容忍注册中心返回的是几分钟以前的注册信息，但不能接受服务直接down掉不可用，也就是说，服务注册功能对于可用性的要求高于一致性。但是zookeeper会出现这样一种情况，当master节点因为网络故障与其他节点失去联系的时候，剩余节点会重新进行leader选举，问题在于，选举leader的时间太长，30~120秒，且选举期间整个zookeeper都是不可用的，这就导致在选举期间注册服务瘫痪。在云部署的环境下，因为网络问题是的zookeeper集群失去master节点是加大概率发生的事件，虽然服务最终能够恢复，但是漫长的选举时间导致的注册长期不可用是不能容忍的</p>
<p><strong>Eureka保证的是AP</strong></p>
<p>Eureka看明白了这一点，因此在设计的时候就优先保证可用性。<strong>Eureka各节点之间都是平等的</strong>几个节点挂掉不会影响正常几点的工作，剩余节点依然可以提供注册和查询服务。而Eureka的客户端在向某个Eureka注册时，如果发现连接失败，则会自动切换到其他的节点，只要有一台Eureka还在，就能保证注册服务的可用性，只不过查到的信息可能不是最新的，除此之外，Eureka还有一种自我保护机制，如果在15分钟内超过85%的节点都没有正常的心跳，那么Eureka就认为客户端与注册中心出现了网络故障，此时会出现以下的集中情况</p>
<ul>
<li>Eureka不再注册列表中移除因为长时间没收到心跳而应该过期的服务</li>
<li>Eureka仍然能够接受新的服务的注册和查询请求，但是不会同步到其他的节点之上（即保证当前节点依然可用）</li>
<li>当网络稳定时，当前实例新的注册信息会被同步到其他的节点之中</li>
</ul>
<p>&#x3D;&#x3D;<strong>因此，Eureka可以很好的应对因网络故障导致部分节点失去联系，而不会像zookeeper那样使整个注册服务瘫痪</strong>&#x3D;&#x3D;</p>
<h2 id="Ribbon"><a href="#Ribbon" class="headerlink" title="Ribbon"></a>Ribbon</h2><h3 id="Ribbon是什么？"><a href="#Ribbon是什么？" class="headerlink" title="Ribbon是什么？"></a>Ribbon是什么？</h3><p>SpringCloud Ribbon是一种基于Netflix Ribbon实现的一套客户端负载均衡的工具</p>
<p>简单的说，Ribbon是Netflix发布的开源项目，主要功能是提供客户端的软件负载均衡算法，将NetFlix的中间层服务连在一起。Ribbon的客户端组件提供一些列的玩着呢个配置项如： 连接超时，重试等等。简单的说，就是配置文件中列出LoadBanlance（简称LB： 负载均衡） 后面所有的机器，Ribbon会自动帮你基于某种规则（如简单轮询，随机连接等等）去连接这些机器。我们也很容易使用Ribbon实现自定义的负载均衡算法</p>
<h3 id="Ribbon能干什么？"><a href="#Ribbon能干什么？" class="headerlink" title="Ribbon能干什么？"></a>Ribbon能干什么？</h3><ul>
<li><p>LB，负载均衡（Load Balance），在微服务或分布式集群中经常用的一种应用</p>
</li>
<li><p>负载均衡简单的说就是将用户的请求平摊的分配到多个服务器上，从而达到系统的HA（高可用）</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049163.png" alt="image-20200924124104980"></p>
</li>
<li><p>常见的负载均衡软件有：  Nginx、Lvs（中国人做的）等   Apache  Tomcat也可以实现负载均衡</p>
</li>
<li><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049284.png" alt="image-20200924124508568"></p>
</li>
<li><p>dubbo、springcloud中均给我们提供了负载均衡，<strong>springcloud的负载均衡算法可以自定义</strong></p>
</li>
<li><p>负载均衡的简单分类：</p>
<ul>
<li>集中式LB<ul>
<li>即在服务的消费方和提供方之间使用独立的LB设施，如Nginx ： 反向代理服务器，由该设施负责把访问请求通过某种策略转发至服务的提供方！！</li>
</ul>
</li>
<li>进程式LB<ul>
<li>将LB逻辑集成到消费方，消费方从服务注册中心获知有哪些地址可用，然后自己再从这些地址中选出一个合适的服务器</li>
<li>&#x3D;&#x3D;Ribbon就属于进程内LB&#x3D;&#x3D;，它只是一个类库，集成于消费方进程，消费方通过它来获取到提供方的地址</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Feign负载均衡"><a href="#Feign负载均衡" class="headerlink" title="Feign负载均衡"></a>Feign负载均衡</h2><h2 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h2><p>feign是声明式的web Service客户端，它让微服务之间的调用变得简单了，类似controller调用service   spring cloud集成ribbon和eureka，可以使用feign时提供负载均衡的http客户端 ， 只需要创建一个接口，然后添加注解即可</p>
<p>feign，主要是社区，大家都习惯面向接口编程。这个是很多人员的开发规范，调用为服务访问两种方法：</p>
<ul>
<li>微服务名字【ribbon】</li>
<li>微服务接口【feign】</li>
</ul>
<h3 id="Feign能干什么？"><a href="#Feign能干什么？" class="headerlink" title="Feign能干什么？"></a>Feign能干什么？</h3><ul>
<li>Feign旨在编写Java Http客户端变得更容易</li>
<li>前面在使用Ribbon  +   RestTemplate时，利用RestTemplate对Http请求的封装处理，形成了一套模板化的调用方法。但是在实际的开发中，由于对服务依赖的调用可能不止一处，往往一个接口会被多处调用，所以通常都会对每个微服务自行封装一些客户端类来包装这些依赖服务的调用。所以，feign在此基础上做了进一步的封装，由它来帮助我们定义和实现依赖服务接口的定义，&#x3D;&#x3D;<strong>在Feign的实现下，我们只只需要创建一个接口并使用注解的方式来配置它（类似于以前在Dao接口上标注Mapper注解，现在是一个微服务接口上标注一个Feign注解即可）</strong>&#x3D;&#x3D;即可完成对服务方的接口绑定，讲话了使用spring Cloud Ribbon时，自动封装服务调用客户端的开发量</li>
</ul>
<h3 id="Feign集成了Ribbon"><a href="#Feign集成了Ribbon" class="headerlink" title="Feign集成了Ribbon"></a>Feign集成了Ribbon</h3><ul>
<li>利用Ribbon维护了MicroServiceCloud—dept的服务列表信息，并且通过轮询实现了客户端的负载均衡，而与Ribbon不同的是，通过Feign只需要定义服务绑定接口且以声明式的方法，优雅而简单的实现了服务调用。</li>
</ul>
<h2 id="服务熔断"><a href="#服务熔断" class="headerlink" title="服务熔断"></a>服务熔断</h2><h3 id="分布式系统面临的问题"><a href="#分布式系统面临的问题" class="headerlink" title="分布式系统面临的问题"></a>分布式系统面临的问题</h3><p>复杂的分布式系统结构中的应用程序有数十个依赖关系，每个依赖关系在某些时候将不可避免的失败！！！</p>
<h3 id="服务雪崩"><a href="#服务雪崩" class="headerlink" title="服务雪崩"></a>服务雪崩</h3><p>多个微服务之间调用的时候，假设微服务A调用微服务B和微服务C，微服务B和微服务C又调用其他的微服务，这个就是所谓的”扇出”，如果扇出的链路上某个微服务的调用时间相应过长或者不可用，对于微服务A的调用就会占用越来越多的系统资源，进而引起系统崩溃，这就是所谓的”雪崩效应“。</p>
<p>对于高流量的应用来说，单一的后端依赖可能会导致所有服务器上的所有资源都在几秒钟饱和，比失败更糟糕的是，这些应用程序还可能导致服务之间的延迟增加，备份队列，线程和其他资源紧张，导致整个系统发生更多的级联故障，这些都表示需要对故障和延迟进行隔离和管理，以便单个依赖关系的失败，不能取消整个应用程序或系统。</p>
<p>我们需要&#x3D;&#x3D;弃车保帅&#x3D;&#x3D;</p>
<h3 id="什么是Hystrix"><a href="#什么是Hystrix" class="headerlink" title="什么是Hystrix"></a>什么是Hystrix</h3><p>Hystrix是一个用于分布式系统的延迟和容错的开源库，在分布式系统里，许多依赖不可避免的会调用失败，比如超时，异常等，Hystrix能够保证在一个依赖出问题的情况下，不会导致整体服务失败，避免级联故障，以提高分布式系统的弹性。</p>
<p>“断路器”本身是一种开关装置，当某个服务单元故障之后，通过断路器的故障监控（类似熔断保险丝），&#x3D;&#x3D;<strong>向调用方返回一个服务预期的，可处理的备选响应（FallBack），而不是长时间的等待或者抛出调用方法无法处理的异常，这样就可以保证服务调用方的线程不会被长时间，</strong>&#x3D;&#x3D;不必要的占用，从而避免了故障在分布式系统中的蔓延，乃至雪崩</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049800.png" alt="image-20200924204019617"></p>
<p>之间的一个断的话就会直接崩掉</p>
<h3 id="Hystrix能干啥"><a href="#Hystrix能干啥" class="headerlink" title="Hystrix能干啥"></a>Hystrix能干啥</h3><ul>
<li>服务降级</li>
<li>服务熔断</li>
<li>服务限流</li>
<li>接近实时的监控</li>
<li>…..</li>
</ul>
<h3 id="服务熔断-1"><a href="#服务熔断-1" class="headerlink" title="服务熔断"></a>服务熔断</h3><p>熔断机制是对应雪崩效应的一种微服务链路保护机制</p>
<p>当扇出链路的某个微服务不可用或者响应时间太长时，会进行服务的降级，<strong>进而熔断该节点微服务的调用，快速返回错误的响应信息</strong>当检测到该节点的微服务调用响应正常后恢复调用链路。在SpringCloud框架里的熔断机制通过Hystrix实现。Hystrix会监控微服务间的调用的状况，当失败的调用到一定阈值，缺省是5秒内20次调用失败就会启动熔断机制。熔断机制的注解是@HystrixCommand</p>
<h3 id="服务降级"><a href="#服务降级" class="headerlink" title="服务降级"></a>服务降级</h3><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049135.png" alt="image-20200925170224925"></p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><h4 id="服务熔断："><a href="#服务熔断：" class="headerlink" title="服务熔断："></a>服务熔断：</h4><ul>
<li>服务端</li>
<li>某个服务超时或者是异常，引起熔断</li>
</ul>
<h4 id="服务降级-1"><a href="#服务降级-1" class="headerlink" title="服务降级"></a>服务降级</h4><ul>
<li>客户端</li>
<li>从整体的网络请求负载考虑，当某个服务熔断或者关闭之后，服务将不再被调用</li>
<li>此时在客户端，，我们可以准备一个FallBackFactory，返回一个默认值（缺省值） 但是服务的整体水平下降了  但是好歹呢能用，比直接挂掉好</li>
</ul>
<h4 id="服务监控"><a href="#服务监控" class="headerlink" title="服务监控"></a>服务监控</h4><p>配置下面的这些东西的时候能解决高版本的页面的显示的问题</p>
<p>&#x3D;&#x3D;<strong>注意:这个配置的一定要是自己的监控页面所在的yaml文件，不然的话将会无法生效</strong>&#x3D;&#x3D;</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解决http://localhost:9000/actuator/hystrix.stream无法访问的问题</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">hystrix:</span></span><br><span class="line">  <span class="attr">dashboard:</span></span><br><span class="line">    <span class="attr">proxy-stream-allow-list:</span> <span class="string">&quot;localhost&quot;</span></span><br></pre></td></tr></table></figure>

<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112049366.png" alt="image-20200930220305642"></p>
<p>这个图就是监控页面的东西</p>
<p>步骤：</p>
<ul>
<li>写监控页面<ul>
<li>导入依赖</li>
<li>编写端口</li>
<li>开启配置enable</li>
</ul>
</li>
<li>直接放入服务</li>
</ul>
<h2 id="Zuul路由网关"><a href="#Zuul路由网关" class="headerlink" title="Zuul路由网关"></a>Zuul路由网关</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述:"></a>概述:</h3><h3 id="什么是路由网关"><a href="#什么是路由网关" class="headerlink" title="什么是路由网关"></a>什么是路由网关</h3><p>zuul包含了对请求的路由和过滤两个最主要的功能：</p>
<p>其中路由功能负责将外部的请求转发到具体的微服务实例上面去，是实现外部同一访问入口的基础，而过滤器功能则负责对请求的处理过程进行干预，是实现请求校验，服务聚合等功能的基础。Zuul和Eureka进行整合，将Zuul自身注册为Eureka服务治理下的应用，同时从Eureka获得其他服务的消息，也即以后访问微服务也都是通过Zuul跳转后获得</p>
<p>**&#x3D;&#x3D;注意：&#x3D;&#x3D;**Zuul服务最终会注册到Eureka服务中</p>
<p>提供：代理+路由+过滤  三大功能</p>
<h3 id="Zuul能干啥"><a href="#Zuul能干啥" class="headerlink" title="Zuul能干啥"></a>Zuul能干啥</h3><ul>
<li>路由</li>
<li>过滤</li>
</ul>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050296.png" alt="image-20200930223500835"></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/consumer/dept/queryDeptById/1%E4%B9%9F%E5%B0%B1%E6%98%AF%E6%8A%8A%E8%BF%99%E4%B8%AA%E8%B7%AF%E5%BE%84%E9%9A%90%E8%97%8F%EF%BC%8C%E8%BF%9B%E8%80%8C%E6%8A%8A%E6%88%91%E4%BB%AC%E7%9A%84%E7%9C%9F%E5%AE%9E%E7%9A%84%E5%9C%B0%E5%9D%80%E4%BF%9D%E5%AD%98">http://localhost:8080/consumer/dept/queryDeptById/1也就是把这个路径隐藏，进而把我们的真实的地址保存</a></p>
<p>官方文档：<a target="_blank" rel="noopener" href="https://github.com/Netflix/Zuul">https://github.com/Netflix/Zuul</a></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050032.png" alt="image-20200930225827162"></p>
<p>避免了暴露我们的服务，正常情况下，需要换</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050464.png" alt="image-20200930230505782"></p>
<p>可以看出，我们能够得到最终的换完之后的东西</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050779.png" alt="image-20200930230841776"></p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050988.png" alt="image-20200930230807796"></p>
<p>到这里，我们的这是的项目就被隐藏起来了，之后的真实我们肯定会隐藏全部的</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">ignore-service：</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="comment"># 我们也可以配置一个前缀</span></span><br><span class="line"><span class="string">prefix：</span> <span class="string">/timous</span>  <span class="comment"># 我们可以自己配置  设置公共的前缀</span></span><br></pre></td></tr></table></figure>

<h2 id="springcloud-config-分布式配置"><a href="#springcloud-config-分布式配置" class="headerlink" title="springcloud config 分布式配置"></a>springcloud config 分布式配置</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><h3 id="分布式系统面临的–-配置文件的问题"><a href="#分布式系统面临的–-配置文件的问题" class="headerlink" title="分布式系统面临的– 配置文件的问题"></a>分布式系统面临的– 配置文件的问题</h3><p>微服务意味着要将单体应用中的业务拆分成为一个个子服务，每个服务的粒度相对较小，因此系统中会出现大量的服务，由于每个服务都需要配置一些必要的信息才能运行，所以一套集中式的，动态的配置管理设施是必不可少的，springcloud提供了configserver来解决这个问题，我们每一个微服务自带着一个application.yaml，那上百的配置文件，我们岂不是要发疯了。</p>
<h3 id="什么是springcloud-config-分布式配置中心"><a href="#什么是springcloud-config-分布式配置中心" class="headerlink" title="什么是springcloud config 分布式配置中心"></a>什么是springcloud config 分布式配置中心</h3><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050479.png" alt="image-20200930232417911"></p>
<p>SpringCloud Config为微服务架构中的微服务提供集中化的外部配置支持，配置服务器为各个不同微服务应用的所有环节提供了一个<strong>中心化的外部配置</strong></p>
<p>SpringCloud Config分为<strong>服务端</strong>和<strong>客户端</strong>两部分</p>
<p>服务端也被称为分布式配置中心，它是一个独立的微服务应用，用来连接配置服务器并为客户端提供获取配置信息，加密，解密信息等访问端口</p>
<p>客户端则是通过制定的配置中心来管理应用资源，以及业务相关的配置内容，并在启动的时候从配置中心获取和加载配置信息。配置服务器默认采用git来存储配置信息，这样就有助于对环境配置进行版本管理。并且可以通过git客户端工具来方便的管理和访问配置内容</p>
<h3 id="SpringCloud-Config分布式配置中心能干嘛"><a href="#SpringCloud-Config分布式配置中心能干嘛" class="headerlink" title="SpringCloud Config分布式配置中心能干嘛"></a>SpringCloud Config分布式配置中心能干嘛</h3><ul>
<li>集中管理配置文件</li>
<li>不同的管理不同的配置，动态化的配置更新，分环境部署，比如 &#x2F;dev &#x2F;test</li>
<li>运行期间动态调整配置，不在需要在每个服务部署的机器上编写配置文件，服务会向配置中心统一拉取自己的信息</li>
<li>当配置发生变化的时候，服务不需要重新启动，即可获得感知到配置文件的变化，并应用新的配置</li>
<li>将配置信息以REST接口的形式暴露</li>
</ul>
<h3 id="SpringCloud-Config分布式配置中心与git整合"><a href="#SpringCloud-Config分布式配置中心与git整合" class="headerlink" title="SpringCloud Config分布式配置中心与git整合"></a>SpringCloud Config分布式配置中心与git整合</h3><p>由于SpringCloud Config是默认使用GIt进行存储配置文件（也有其他的方式，比如支持svn和本地文件），但是最推荐的还是git而且使用https&#x2F;http的访问形式</p>
<p>建立项目：</p>
<p>1.导入依赖</p>
<p>2.编写配置文件</p>
<p>3.开启这个功能   EnableXXXXX</p>
<p>4.配置类</p>
<h1 id="Spring-Cloud-Alibaba"><a href="#Spring-Cloud-Alibaba" class="headerlink" title="Spring Cloud Alibaba"></a>Spring Cloud Alibaba</h1><h2 id="1-0在服务器启动Nacos和sentinel"><a href="#1-0在服务器启动Nacos和sentinel" class="headerlink" title="1.0在服务器启动Nacos和sentinel"></a>1.0在服务器启动Nacos和sentinel</h2><h3 id="1-0-1上传对应的文件"><a href="#1-0-1上传对应的文件" class="headerlink" title="1.0.1上传对应的文件"></a>1.0.1上传对应的文件</h3><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112054880.png" alt="image-20260111205407843"></p>
<h3 id="1-0-2启动Nacos"><a href="#1-0-2启动Nacos" class="headerlink" title="1.0.2启动Nacos"></a>1.0.2启动Nacos</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动Nacos（linux的单机模式）</span></span><br><span class="line">sh startup.sh -m standalone</span><br><span class="line"><span class="comment">#查看对应的端口的运行的程序（nacos的是8848）</span></span><br><span class="line">netstat -tunlp | grep 8848</span><br></pre></td></tr></table></figure>

<p>如下图所示,Nacos启动成功：</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050440.png" alt="image-20220419195750480"></p>
<p>可以在浏览器访问：</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050593.png" alt="image-20220419200621512"></p>
<h3 id="1-0-3启动sentinel"><a href="#1-0-3启动sentinel" class="headerlink" title="1.0.3启动sentinel"></a>1.0.3启动sentinel</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动sentinel的命令</span></span><br><span class="line">java -jar sentinel-dashboard-1.7.2.jar &amp; nohub </span><br><span class="line"><span class="comment">#查看对应的端口的进程</span></span><br><span class="line">netstat -tunlp | grep 8080</span><br></pre></td></tr></table></figure>

<p>sentinel对应的是8080的端口，所以应该查看8080对应的端口号</p>
<p>在浏览器访问对应的sentinel</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050578.png" alt="image-20220419200700178"></p>
<h2 id="1-1什么是Spring-Cloud？"><a href="#1-1什么是Spring-Cloud？" class="headerlink" title="1.1什么是Spring Cloud？"></a>1.1什么是Spring Cloud？</h2><p>是一些列分布式框架的集合，基于SpringBoot进行开发的。是一种规范，不是一个具体的实现，只是一种接口。</p>
<p>将不同公司生产的不同组件进行集成，以SpringBoot的风格进行集成，这样开发者就不需要关注底层的整合实现，而是开箱即用。需要哪个组件就使用springboot整合起来，非常的方便。是SpringBoot的分支。</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050777.png" alt="image-20220419193827130"></p>
<h2 id="1-2什么是Spring-Cloud-Alibaba？"><a href="#1-2什么是Spring-Cloud-Alibaba？" class="headerlink" title="1.2什么是Spring Cloud Alibaba？"></a>1.2什么是Spring Cloud Alibaba？</h2><p>Spring Cloud Netflix （之前做的是收费视频的 ， 现已经闭源了）</p>
<p>Spring Cloud Alibaba（Spring Cloud官网：<a target="_blank" rel="noopener" href="https://spring.io/projects/spring-cloud%EF%BC%89">https://spring.io/projects/spring-cloud）</a></p>
<p>Spring Cloud Alibaba  工程结构</p>
<p>Spring Boot—》 Spring Cloud —》 Spring Cloud Alibaba（版本问题官网可以查询到）  版本的命名问题是地铁的站（伦敦的地铁站）</p>
<h2 id="1-3上手代码"><a href="#1-3上手代码" class="headerlink" title="1.3上手代码"></a>1.3上手代码</h2><p>父工程依赖</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="line">         xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">         xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">    &lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">2.3</span><span class="number">.0</span>.RELEASE&lt;/version&gt;</span><br><span class="line">        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;top.timous&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;SpringCLoudAlibabaLearn&lt;/artifactId&gt;</span><br><span class="line">    &lt;packaging&gt;pom&lt;/packaging&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.0</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;modules&gt;</span><br><span class="line">        &lt;<span class="keyword">module</span>&gt;provider&lt;/<span class="keyword">module</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">module</span>&gt;consumer&lt;/<span class="keyword">module</span>&gt;</span><br><span class="line">    &lt;/modules&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;maven.compiler.source&gt;<span class="number">8</span>&lt;/maven.compiler.source&gt;</span><br><span class="line">        &lt;maven.compiler.target&gt;<span class="number">8</span>&lt;/maven.compiler.target&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">    &lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;!-- https:<span class="comment">//mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-dependencies --&gt;</span></span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;Hoxton.SR3&lt;/version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">                &lt;scope&gt;<span class="keyword">import</span>&lt;/scope&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;<span class="number">2.2</span><span class="number">.1</span>.RELEASE&lt;/version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">                &lt;scope&gt;<span class="keyword">import</span>&lt;/scope&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">        &lt;/dependencies&gt;</span><br><span class="line">    &lt;/dependencyManagement&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2服务治理"><a href="#2服务治理" class="headerlink" title="2服务治理"></a>2服务治理</h2><h2 id="2-0服务注册-服务发现"><a href="#2-0服务注册-服务发现" class="headerlink" title="2.0服务注册  + 服务发现"></a>2.0服务注册  + 服务发现</h2><p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112050146.png" alt="image-20220419200458039"></p>
<h2 id="2-1创建子工程"><a href="#2-1创建子工程" class="headerlink" title="2.1创建子工程"></a>2.1创建子工程</h2><p>pom文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringCLoudAlibabaLearn<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>top.timous<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>provider<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>application文件:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="comment"># 对应的nacos的注册中心的地址  对应的就是域名 + 端口</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">clh.timous.top:8848</span></span><br><span class="line"><span class="comment"># 应用的名称</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">provider</span></span><br></pre></td></tr></table></figure>

<p>启动对应的provider程序：（启动之后对应的nacos的页面）</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112052125.png" alt="image-20220419201317103"></p>
<p>启动了两个不同端口的provider程序：</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112052361.png" alt="image-20220419201514786"></p>
<h2 id="2-2创建consumer服务"><a href="#2-2创建consumer服务" class="headerlink" title="2.2创建consumer服务"></a>2.2创建consumer服务</h2><p>pom文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringCLoudAlibabaLearn<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>top.timous<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>consumer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>application.yml文件</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8100</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">clh.timous.top:8848</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">consumer</span></span><br></pre></td></tr></table></figure>

<p>服务发现的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.timous.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.ServiceInstance;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.discovery.DiscoveryClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Timous</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-04-05 23:55</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsumerController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DiscoveryClient discoveryClient;</span><br><span class="line"><span class="comment">//返回对应的实例</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/instance&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;ServiceInstance&gt; <span class="title function_">instances</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;ServiceInstance&gt; provider = discoveryClient.getInstances(<span class="string">&quot;provider&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> provider;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从下面的图中可以看出，对应的值就获取到了（刚才的两个服务的发现）</p>
<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://raw.githubusercontent.com/timoustop/PicGoSave/main/2026/typora/202601112052917.png" alt="image-20220419201925257"></p>
<h2 id="2-3写测试接口"><a href="#2-3写测试接口" class="headerlink" title="2.3写测试接口"></a>2.3写测试接口</h2>
<div class="article-footer fs14">
    <section id="license">
      <div class="header"><span>License</span></div>
      <div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div>
    </section>
    </div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">Newer</div><a href="/2022/01/06/mybatisplus%E5%AD%A6%E4%B9%A0/">mybatisplus学习</a></div><div class="item" id="next"><div class="note">Older</div><a href="/2022/01/04/springboot%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6/">springboot原理探究</a></div></section></div>






<footer class="page-footer footnote"><hr><div class="text"><p>本站由 <a href="/">timous</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.28.0">Stellar 1.28.0</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">On This Page</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Cloud-Netflix"><span class="toc-text">Spring Cloud Netflix</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-text">优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A0%88%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-text">微服务的技术栈有哪些</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9SpringCloud%E8%BF%9B%E8%A1%8C%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84"><span class="toc-text">为什么选择SpringCloud进行微服务架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%80%89%E5%9E%8B%E4%BE%9D%E6%8D%AE"><span class="toc-text">1.选型依据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BD%93%E5%89%8D%E5%90%84%E5%A4%A7IT%E5%85%AC%E5%8F%B8%E7%94%A8%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-text">2.当前各大IT公司用的微服务架构有哪些</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E5%AF%B9%E6%AF%94"><span class="toc-text">3.各微服务框架对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringCloud%E5%85%A5%E9%97%A8%E6%A6%82%E8%BF%B0"><span class="toc-text">SpringCloud入门概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E5%92%8CSpringCloud%E5%85%B3%E7%B3%BB"><span class="toc-text">SpringBoot和SpringCloud关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dubbo%E5%92%8CSpringCloud%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B"><span class="toc-text">Dubbo和SpringCloud技术选型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%86%E5%B8%83%E5%BC%8F-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86Dubbo"><span class="toc-text">1.分布式+服务治理Dubbo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Dubbo%E5%92%8CSpringCloud%E5%AF%B9%E6%AF%94"><span class="toc-text">2.Dubbo和SpringCloud对比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-SpringCloud%E8%83%BD%E5%B9%B2%E5%95%A5"><span class="toc-text">3.SpringCloud能干啥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-SpringCloud%E7%89%88%E6%9C%AC%E9%80%89%E6%8B%A9"><span class="toc-text">4.SpringCloud版本选择</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E7%9A%84%E7%89%88%E6%9C%AC%E5%85%B3%E7%B3%BB"><span class="toc-text">实际开发的版本关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0"><span class="toc-text">Eureka服务注册与发现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFEureka"><span class="toc-text">1.什么是Eureka</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8E%9F%E7%90%86%E8%AE%B2%E8%A7%A3"><span class="toc-text">2.原理讲解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8081%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0Discovery"><span class="toc-text">5.8081服务发现Discovery</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Eureka%E5%92%8Czookeeper%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">Eureka和zookeeper的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ribbon"><span class="toc-text">Ribbon</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Ribbon%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">Ribbon是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ribbon%E8%83%BD%E5%B9%B2%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">Ribbon能干什么？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Feign%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-text">Feign负载均衡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B%EF%BC%9A"><span class="toc-text">简介：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Feign%E8%83%BD%E5%B9%B2%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">Feign能干什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Feign%E9%9B%86%E6%88%90%E4%BA%86Ribbon"><span class="toc-text">Feign集成了Ribbon</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD"><span class="toc-text">服务熔断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E9%9D%A2%E4%B8%B4%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">分布式系统面临的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E9%9B%AA%E5%B4%A9"><span class="toc-text">服务雪崩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFHystrix"><span class="toc-text">什么是Hystrix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hystrix%E8%83%BD%E5%B9%B2%E5%95%A5"><span class="toc-text">Hystrix能干啥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD-1"><span class="toc-text">服务熔断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7"><span class="toc-text">服务降级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-text">总结：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD%EF%BC%9A"><span class="toc-text">服务熔断：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7-1"><span class="toc-text">服务降级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7"><span class="toc-text">服务监控</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Zuul%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3"><span class="toc-text">Zuul路由网关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-text">概述:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%AF%E7%94%B1%E7%BD%91%E5%85%B3"><span class="toc-text">什么是路由网关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Zuul%E8%83%BD%E5%B9%B2%E5%95%A5"><span class="toc-text">Zuul能干啥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springcloud-config-%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-text">springcloud config 分布式配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E9%9D%A2%E4%B8%B4%E7%9A%84%E2%80%93-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">分布式系统面临的– 配置文件的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFspringcloud-config-%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83"><span class="toc-text">什么是springcloud config 分布式配置中心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringCloud-Config%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E8%83%BD%E5%B9%B2%E5%98%9B"><span class="toc-text">SpringCloud Config分布式配置中心能干嘛</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringCloud-Config%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E4%B8%8Egit%E6%95%B4%E5%90%88"><span class="toc-text">SpringCloud Config分布式配置中心与git整合</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Cloud-Alibaba"><span class="toc-text">Spring Cloud Alibaba</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-0%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%AF%E5%8A%A8Nacos%E5%92%8Csentinel"><span class="toc-text">1.0在服务器启动Nacos和sentinel</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-0-1%E4%B8%8A%E4%BC%A0%E5%AF%B9%E5%BA%94%E7%9A%84%E6%96%87%E4%BB%B6"><span class="toc-text">1.0.1上传对应的文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-0-2%E5%90%AF%E5%8A%A8Nacos"><span class="toc-text">1.0.2启动Nacos</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-0-3%E5%90%AF%E5%8A%A8sentinel"><span class="toc-text">1.0.3启动sentinel</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E4%BB%80%E4%B9%88%E6%98%AFSpring-Cloud%EF%BC%9F"><span class="toc-text">1.1什么是Spring Cloud？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E4%BB%80%E4%B9%88%E6%98%AFSpring-Cloud-Alibaba%EF%BC%9F"><span class="toc-text">1.2什么是Spring Cloud Alibaba？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E4%B8%8A%E6%89%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">1.3上手代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86"><span class="toc-text">2服务治理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-0%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C-%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0"><span class="toc-text">2.0服务注册  + 服务发现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E5%88%9B%E5%BB%BA%E5%AD%90%E5%B7%A5%E7%A8%8B"><span class="toc-text">2.1创建子工程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E5%88%9B%E5%BB%BAconsumer%E6%9C%8D%E5%8A%A1"><span class="toc-text">2.2创建consumer服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E5%86%99%E6%B5%8B%E8%AF%95%E6%8E%A5%E5%8F%A3"><span class="toc-text">2.3写测试接口</span></a></li></ol></li></ol></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>Scroll to Top</span></a><a class="buttom" onclick="util.scrollComment()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M10.46 1.25h3.08c1.603 0 2.86 0 3.864.095c1.023.098 1.861.3 2.6.752a5.75 5.75 0 0 1 1.899 1.899c.452.738.654 1.577.752 2.6c.095 1.004.095 2.261.095 3.865v1.067c0 1.141 0 2.036-.05 2.759c-.05.735-.153 1.347-.388 1.913a5.75 5.75 0 0 1-3.112 3.112c-.805.334-1.721.408-2.977.43a10.81 10.81 0 0 0-.929.036c-.198.022-.275.054-.32.08c-.047.028-.112.078-.224.232c-.121.166-.258.396-.476.764l-.542.916c-.773 1.307-2.69 1.307-3.464 0l-.542-.916a10.605 10.605 0 0 0-.476-.764c-.112-.154-.177-.204-.224-.232c-.045-.026-.122-.058-.32-.08c-.212-.023-.49-.03-.93-.037c-1.255-.021-2.171-.095-2.976-.429A5.75 5.75 0 0 1 1.688 16.2c-.235-.566-.338-1.178-.389-1.913c-.049-.723-.049-1.618-.049-2.76v-1.066c0-1.604 0-2.86.095-3.865c.098-1.023.3-1.862.752-2.6a5.75 5.75 0 0 1 1.899-1.899c.738-.452 1.577-.654 2.6-.752C7.6 1.25 8.857 1.25 10.461 1.25M6.739 2.839c-.914.087-1.495.253-1.959.537A4.25 4.25 0 0 0 3.376 4.78c-.284.464-.45 1.045-.537 1.96c-.088.924-.089 2.11-.089 3.761v1c0 1.175 0 2.019.046 2.685c.045.659.131 1.089.278 1.441a4.25 4.25 0 0 0 2.3 2.3c.515.214 1.173.294 2.429.316h.031c.398.007.747.013 1.037.045c.311.035.616.104.909.274c.29.17.5.395.682.645c.169.232.342.525.538.856l.559.944a.52.52 0 0 0 .882 0l.559-.944c.196-.331.37-.624.538-.856c.182-.25.392-.476.682-.645c.293-.17.598-.24.909-.274c.29-.032.639-.038 1.037-.045h.032c1.255-.022 1.913-.102 2.428-.316a4.25 4.25 0 0 0 2.3-2.3c.147-.352.233-.782.278-1.441c.046-.666.046-1.51.046-2.685v-1c0-1.651 0-2.837-.089-3.762c-.087-.914-.253-1.495-.537-1.959a4.25 4.25 0 0 0-1.403-1.403c-.464-.284-1.045-.45-1.96-.537c-.924-.088-2.11-.089-3.761-.089h-3c-1.651 0-2.837 0-3.762.089" clip-rule="evenodd"/><path fill="currentColor" d="M9 11a1 1 0 1 1-2 0a1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0a1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0a1 1 0 0 1 2 0"/></svg><span>Join Discussion</span></a></div></widget>
</div></aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `Just`,
      min: `minutes ago`,
      hour: `hours ago`,
      day: `days ago`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js`,
    marked: `https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>

<!-- required -->
<script src="/js/main.js?v=1.28.0" async></script>

<!-- optional -->



<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.bootcdn.net/ajax/libs/flying-pages/2.1.2/flying-pages.min.js"></script><script defer src="https://cdn.bootcdn.net/ajax/libs/vanilla-lazyload/17.8.4/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.min.css`,
    js: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.umd.min.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || null
        }
      });
    })
  }
</script><script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
